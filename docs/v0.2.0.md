# Ziron v0.2.0 Roadmap

**Target Release**: Advanced parsing, tab completion, extended built-ins

This document outlines the features planned for Ziron v0.2.0, focusing on improving the core shell functionality with advanced parsing capabilities, tab completion, and extended built-in commands.

---

## Shell Functionality

### Advanced Command Parsing

#### Quoted String Handling
- [x] Support for double quotes (`"string with spaces"`)
- [x] Support for single quotes (`'string'`)
- [x] Escaped characters within quotes
- [x] Nested quote handling
- [x] Quote preservation in arguments

#### Variable Expansion
- [x] Basic variable expansion (`$VAR`)
- [x] Braced variable expansion (`${VAR}`)
- [x] Default value expansion (`${VAR:-default}`)
- [x] Alternative value expansion (`${VAR:+value}`)
- [x] Error on unset (`${VAR?error}`)
- [x] Variable length (`${#VAR}`)
- [x] Substring expansion (`${VAR:offset:length}`)

#### Command Substitution
- [x] Backtick substitution (`` `command` ``)
- [x] Dollar-paren substitution (`$(command)`)
- [x] Nested command substitution
- [x] Error handling for failed substitutions

#### Arithmetic Expansion
- [x] Basic arithmetic (`$((expression))`)
- [x] Integer operations (+, -, *, /, %)
- [x] Bitwise operations (&, |, ^, ~, <<, >>)
- [x] Comparison operators (==, !=, <, >, <=, >=)
- [x] Logical operators (&&, ||, !)
- [x] Variable references in expressions

#### Globbing
- [x] Wildcard matching (`*`)
- [x] Single character matching (`?`)
- [x] Character class matching (`[...]`)
- [x] Negated character classes (`[!...]`)
- [x] Range matching (`[a-z]`)

#### Tilde Expansion
- [x] Home directory expansion (`~`)
- [x] User home expansion (`~user`)
- [x] Current user expansion (`~+`)
- [x] Previous directory expansion (`~-`)

#### Brace Expansion
- [x] Simple brace expansion (`{a,b,c}`)
- [x] Range expansion (`{1..10}`)
- [x] Nested brace expansion (`{a,{b,c}}`)
- [x] Prefix/suffix expansion (`prefix{a,b}suffix`)

### Advanced Piping & Redirection

#### File Redirection
- [x] Output redirection (`>`)
- [x] Append redirection (`>>`)
- [x] Input redirection (`<`)
- [x] Error redirection (`2>`)
- [x] Combined output/error (`&>`)
- [x] Append error (`2>>`)
- [x] File descriptor redirection (`n>`, `n<`, `n>&m`)

#### Here-Documents
- [x] Basic here-document (`<<`)
- [x] Here-document with delimiter
- [x] Here-document with quoted delimiter (no expansion)
- [x] Here-document with dash (`<<-`)

#### Here-Strings
- [x] Here-string support (`<<<`)

#### Process Substitution
- [x] Input process substitution (`<()`)
- [x] Output process substitution (`>()`)

#### Background Processes
- [x] Background execution (`&`)
- [x] Process ID tracking
- [x] Background process output handling

#### Job Control
- [x] Job listing (`jobs`)
- [x] Foreground job (`fg`)
- [x] Background job (`bg`)
- [x] Job killing (`kill %1`)
- [x] Job number references (`%1`, `%+`, `%-`)
- [x] Job status display

### Tab Completion

#### File and Directory Completion
- [x] File name completion
- [x] Directory name completion
- [x] Path completion
- [x] Hidden file completion
- [x] Case-insensitive completion (optional)

#### Command Name Completion
- [x] Built-in command completion
- [x] External command completion (PATH search)
- [x] Command alias completion
- [x] Function name completion

#### Variable Completion
- [x] Environment variable completion
- [x] Shell variable completion
- [x] Variable name completion after `$`

#### Custom Completion Functions
- [x] Completion function registration
- [x] Context-aware completion
- [x] Argument-specific completion
- [x] Completion function API

#### Completion UI
- [x] Completion hints and descriptions
- [x] Multi-column completion display
- [x] Completion menu navigation
- [x] Partial completion acceptance

### Extended Built-in Commands

#### Command Management
- [x] `alias` - Create command aliases
- [x] `unalias` - Remove command aliases
- [x] `type` - Show command type (builtin/external/alias/function)
- [x] `which` - Locate command executable

#### Script Execution
- [x] `source` / `.` - Execute script in current shell
- [x] Script file execution (`.ziron` files)
- [x] Script argument passing (`$1`, `$2`, etc.)
- [x] Script argument count (`$#`)
- [x] All script arguments (`$@`, `$*`)
- [x] Script return codes

#### Job Control Commands
- [x] `jobs` - List background jobs
- [x] `fg` - Bring job to foreground
- [x] `bg` - Send job to background
- [x] `kill` - Send signal to process/job
- [x] `wait` - Wait for job completion

#### System Commands
- [x] `ulimit` - Display/set resource limits
- [x] `umask` - Display/set file mode mask
- [x] `times` - Display process times

#### Directory Stack
- [x] `pushd` - Push directory onto stack
- [x] `popd` - Pop directory from stack
- [x] `dirs` - Display directory stack
- [x] Directory stack navigation

#### Other Built-ins
- [x] `read` - Read input into variables
- [x] `printf` - Formatted output
- [x] `test` / `[` - Conditional testing
- [x] `true` / `false` - Return success/failure

---

## Theming & UI Improvements

### Advanced Theming Features

#### Color Support
- [x] True color (24-bit) support
- [x] RGB color specification
- [x] Custom color palettes
- [x] Color theme presets

#### Conditional Display
- [x] Conditional segment display (rules)
- [x] Rule-based module activation
- [x] Context-aware segment visibility

#### Prompt Enhancements
- [x] Multi-line prompts
- [x] Right-side prompt
- [x] Prompt timing information (infrastructure)
- [x] Custom separators with icons/unicode

---

## Additional Modules

### Core Status Modules
- [x] **exitcode** - Display last command exit code
- [x] **timer** - Command execution time
- [x] **time** - Current time/date display

### Development Environment Modules
- [x] **venv** - Python virtual environment indicator
- [x] **node** - Node.js version display
- [x] **rust** - Rust toolchain version
- [x] **conda** - Conda environment indicator

---

## Testing & Quality Assurance

### Testing Infrastructure
- [x] Unit tests for parsing components
- [x] Integration tests for built-in commands
- [x] Completion system tests
- [x] Redirection tests
- [x] Test coverage reporting (infrastructure)

### Documentation
- [x] Built-in command documentation
- [x] Parsing syntax documentation
- [x] Completion system documentation
- [x] Migration guide from basic to advanced features

---

## Performance Improvements

- [x] Optimize parsing performance (use mem::take for token allocation)
- [x] Optimize completion lookup (use HashSet for PATH deduplication)
- [x] Reduce memory usage (optimized with mem::take, HashSet)
- [x] Improve startup time (lazy loading, optimized initialization)

---

## Breaking Changes

None planned for v0.2.0. This release focuses on adding new features while maintaining backward compatibility with v0.1.0.

---

## Migration Notes

Users upgrading from v0.1.0 to v0.2.0:
- No configuration changes required
- Existing themes and modules remain compatible
- New parsing features are opt-in (backward compatible)
- Completion system activates automatically

---

*This roadmap is subject to change based on development progress and community feedback.*

